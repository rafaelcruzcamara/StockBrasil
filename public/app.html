<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockBrasil - Gerenciamento de Estoque e Vendas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <link rel="shortcut icon" href="./images/StockBrasilPRO-removebg-preview.png">
</head>
<body>



    <div id="undo-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3><i class="fas fa-history"></i> Refazer Ação</h3>
            <p>A ação **<span id="undo-action-type"></span>** sobre **<span id="undo-action-detail"></span>** foi selecionada.</p>
            <p style="font-weight: bold; margin: 15px 0; color: var(--color-accent-red);">⚠️ Esta é uma simulação. Em um sistema real, essa ação requer lógica complexa de transações e acesso de administrador.</p>
            <button class="submit-btn blue-btn" onclick="simulateUndoConfirmation()"><i class="fas fa-check-circle"></i> Simular Reversão</button>
            <button class="submit-btn delete-btn" onclick="document.getElementById('undo-modal').style.display='none';"><i class="fas fa-times-circle"></i> Cancelar</button>
        </div>
    </div>
    
<div class="sidebar" id="sidebar">
    
   <div class="profile-menu-container">
    
   <div class="sidebar-profile-card" onclick="toggleSidebarProfileMenu(event)">
        <img src="images/default-avatar.png" id="sidebar-user-photo" alt="Perfil">
        <div class="sidebar-profile-info">
            <span id="sidebar-user-name">Carregando...</span>
            <small>Meu Perfil</small>
        </div>
        <i class="fas fa-chevron-down arrow-icon"></i>
    </div>

    <div id="sidebar-profile-dropdown" class="sidebar-dropdown">
        <a href="#" onclick="openProfileSettings()"><i class="fas fa-user-cog"></i> Editar</a>
        <a href="#" onclick="logout()" style="color: #ff453a;"><i class="fas fa-sign-out-alt"></i> Sair</a>
    </div>
</div>

    <div id="sidebar-profile-dropdown" class="sidebar-dropdown">
        <a href="#" onclick="openProfileSettings()"><i class="fas fa-user-cog"></i> Editar</a>
        <a href="#" onclick="logout()" style="color: #ff453a;"><i class="fas fa-sign-out-alt"></i> Sair</a>
    </div>

    <hr class="sidebar-divider">

    <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active"><i class="fas fa-home"></i> <span>Dashboard</span></a>
<a href="#produtos" class="nav-item"><i class="fas fa-boxes"></i> <span>Produtos</span></a>
<a href="#vendas" class="nav-item"><i class="fas fa-cash-register"></i> <span>Ponto de Venda</span></a>

<a href="#parceiros" class="nav-item"><i class="fas fa-users"></i> <span>Parceiros</span></a>

<a href="#carrinhos-salvos" class="nav-item"><i class="fas fa-shopping-basket"></i> <span>Carrinhos Salvos</span></a>
<a href="#financeiro" class="nav-item"><i class="fas fa-wallet"></i> <span>Financeiro</span></a>
<a href="#relatorios" class="nav-item"><i class="fas fa-chart-line"></i> <span>Relatórios</span></a>
<a href="#config" class="nav-item"><i class="fas fa-cogs"></i> <span>Configurações</span></a>
    </nav>

    <div class="sidebar-footer">
        <button class="toggle-btn" onclick="toggleSidebar()">
            <i class="fas fa-chevron-left"></i>
        </button>
    </div>

</div>


    <div class="main-content" id="main-content">
        
<header class="top-header">
    <div class="header-left">
        <div class="header-title">
            <h1 id="current-page-title">Dashboard</h1>
        </div>
    </div>

    <div class="header-right">
        <div class="notification-container">
            <i class="fas fa-bell bell-icon" id="bell-icon" onclick="toggleAlertsWindow(event)"></i>
            <div class="alerts-floating-window" id="alerts-floating-window">
                <div class="alerts-header">
                    <h4>Notificações</h4>
                    <button class="clear-alerts-btn" onclick="clearAllAlerts()">Limpar</button>
                </div>
                <ul id="alerts-dropdown-list"></ul>
            </div>
        </div>
    </div>
</header>

        

        <section id="dashboard" class="content-section">
            <div class="metric-cards-container metrics-grid">
                <div class="card metric-card green-card">
                    <div class="card-content">
                        <p class="card-label">Estoque Total de Itens</p>
                        <span class="card-value" id="total-stock-items">0</span>
                    </div>
                    <i class="fas fa-boxes"></i>
                </div>
                <div class="card metric-card purple-card">
                    <div class="card-content">
                        <p class="card-label">Total de Produtos</p>
                        <span class="card-value" id="total-products">0</span>
                    </div>
                    <i class="fas fa-box-open"></i>
                </div>
                <div class="card metric-card red-card">
                    <div class="card-content">
                        <p class="card-label">Produtos Estoque Baixo</p>
                        <span class="card-value" id="low-stock-count">0</span>
                    </div>
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="card metric-card blue-card">
                    <div class="card-content">
                        <p class="card-label">Vendas Hoje</p>
                        <span class="card-value" id="sales-today">R$ 0,00</span>
                    </div>
                    <i class="fas fa-chart-line"></i>
                </div>
            </div>

            <div class="dashboard-secondary-area charts-grid">
                <div class="card chart-card">
                    <h4 class="card-title">Análise de Vendas (Últimos 30 Dias)</h4>
                    <div class="chart-container">
                        <canvas id="daily-sales-chart"></canvas> 
                    </div>
                </div>
                
                <div class="card chart-card">
                    <h4 class="card-title">Alerta de Estoque</h4>
                    <ul class="alert-list" id="dashboard-alert-list">
                        <li>Nenhum alerta de estoque baixo.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="produtos" class="content-section" style="display: none;">
            <div class="tabs">
                <button class="tab-button active" data-tab-content="product-list-tab"><i class="fas fa-clipboard-list"></i> Lista de Produtos</button>
                <button class="tab-button" data-tab-content="product-form-tab"><i class="fas fa-plus-circle"></i> Cadastrar/Editar</button>
            </div>

            <div id="product-list-tab" class="tab-content active">
                <div class="card">
                    <h3 class="card-title">Estoque Atual</h3>
                    <div class="table-responsive">
                        <table class="data-table" id="product-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Categoria</th>
                                    <th>Preço (R$)</th>
                                    <th>Estoque</th>
                                    <th>Mínimo</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            

            <div id="product-form-tab" class="tab-content" style="display: none;">
                <div class="card">
                    <h3 class="card-title" id="form-title">Formulário de Cadastro de Produto</h3>
                    <form class="product-form" onsubmit="handleProductForm(event)">
                        <input type="hidden" id="product-id" name="id">

<div class="form-grid">
    <div class="form-group">
        <label for="nome">Nome do Produto *</label>
        <input type="text" id="nome" name="nome" required placeholder="Ex: Bíblia Ave Maria">
    </div>
    
    <div class="form-group">
        <label for="categoria">Categoria *</label>
        <select id="categoria" name="categoria">
            </select>
    </div>

<div class="form-group">
    <label for="prodGrupo" style="display:flex; justify-content:space-between; align-items:center;">
        Grupo / Subcategoria
        <span style="font-size: 0.75rem; color: var(--color-accent-blue); background: rgba(10, 132, 255, 0.1); padding: 2px 6px; border-radius: 4px;">
            <i class="fas fa-magic"></i> Auto-Salvar
        </span>
    </label>
    
    <div class="custom-dropdown-wrapper">
        <input type="text" id="prodGrupo" 
               placeholder="Selecione ou digite um novo..." 
               autocomplete="off"
               oninput="filtrarGrupoDropdown()"
               onfocus="abrirGrupoDropdown()"
               style="padding-right: 35px; border-left: 3px solid var(--color-accent-blue);">
        
        <i class="fas fa-chevron-down dropdown-arrow" onclick="toggleGrupoDropdown(event)"></i>

        <ul id="lista-grupos-custom" class="custom-dropdown-list">
            </ul>
    </div>

    <small style="color: var(--color-text-secondary); font-size: 0.8rem; margin-top: 5px; display: block;">
        <i class="fas fa-info-circle"></i> Digite para criar um novo ou selecione na lista.
    </small>
</div>
    
    <div class="form-group">
        <label for="prodFornecedor">Fornecedor</label>
        <select id="prodFornecedor">
            <option value="">Geral / Sem Fornecedor</option>
            </select>
    </div>

    <div class="form-group">
        <label for="codigoBarras">Código de Barras / EAN</label>
        <input type="text" id="codigoBarras" placeholder="Escaneie ou digite..." onkeypress="return event.charCode >= 48 && event.charCode <= 57">
    </div>
</div>

<div class="form-group" style="margin-bottom: 20px;">
    <label for="prodImagem">Link da Imagem (URL)</label>
    <input type="text" id="prodImagem" placeholder="http://...">
</div>

<hr style="border: 0; border-top: 1px solid var(--color-border); margin: 20px 0;">

<h4 style="color: var(--color-accent-blue); margin-bottom: 15px;">
    Precificação
</h4>

<div class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
    
    <div class="form-group">
        <label for="custo">Custo Produto (R$)</label>
        <input type="number" id="custo" step="0.01" min="0" placeholder="0,00" oninput="calcularPrecoVenda()">
    </div>

    <div class="form-group">
        <label for="prodFrete">Frete/Extra (R$)</label>
        <input type="number" id="prodFrete" step="0.01" min="0" value="0" placeholder="0,00" oninput="calcularPrecoVenda()">
    </div>

    <div class="form-group">
        <label for="prodMarkup">Markup (x)</label>
        <input type="number" id="prodMarkup" step="0.1" min="1" value="2.0" placeholder="Ex: 2.0" oninput="calcularPrecoVenda()">
        <small style="color: var(--color-text-tertiary);">2.0 = 100% Lucro</small>
    </div>
</div>

<div style="background: var(--color-bg-tertiary); padding: 15px; border-radius: 8px; border: 1px solid var(--color-border); margin-bottom: 20px;">
    <div class="form-grid" style="margin-bottom: 0;">
        
        <div class="form-group">
            <label style="color: var(--color-text-secondary);">Preço Sugerido</label>
            <input type="text" id="displayPrecoSugerido" readonly style="background: transparent; border: none; font-weight: bold; color: var(--color-text-secondary);">
        </div>

        <div class="form-group">
            <label for="preco" style="color: var(--color-accent-green);">Preço de Venda Final *</label>
            <input type="number" id="preco" name="preco" step="0.01" min="0.01" required 
                   style="border-color: var(--color-accent-green); font-size: 1.1rem; font-weight: bold;">
        </div>
    </div>
    
    <div style="margin-top: 10px; font-size: 0.9rem; text-align: right;">
        Lucro Estimado: <span id="spanLucro" style="color: var(--color-accent-green); font-weight: bold;">R$ 0,00</span> 
        (<span id="spanMargem">0%</span>)
    </div>
</div>

<div class="form-grid">
    <div class="form-group">
        <label for="quantidade">Estoque Atual *</label>
        <input type="number" id="quantidade" name="quantidade" min="0" required>
    </div>
    <div class="form-group">
        <label for="minimo">Estoque Mínimo *</label>
        <input type="number" id="minimo" name="minimo" min="0" required>
    </div>
</div>

<div class="form-actions">
    <button type="submit" id="submit-btn" class="submit-btn blue-btn"><i class="fas fa-plus-circle"></i> Salvar Produto</button>
    <button type="button" id="cancel-edit-btn" class="submit-btn delete-btn" style="display:none;" onclick="resetProductForm()"><i class="fas fa-times-circle"></i> Cancelar</button>
</div>
                    </form>
                </div>
            </div>

        
        </section>

        <section id="vendas" class="content-section" style="display: none;">
            <div class="pdv-layout pdv-container">
                <div class="pdv-left-panel">
                    <div class="card pdv-card">
                        <h3 class="card-title">Produtos</h3>
                        <div class="pdv-search">
                            <input type="text" id="pdv-search-input" placeholder="Buscar produto por nome ou Código..." class="search-input" onkeyup="filterPdvProducts()">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="products-grid" id="products-grid">
                        </div>
                    </div>
                </div>

               <div class="pdv-right-panel" id="pdv-right-panel">
    <div class="card cart-card">
        <h3 class="card-title">Carrinho de Compras</h3>
        
        <ul class="cart-items-list" id="cart-items-list">
        </ul>
        
        <!-- DIV CART-ACTIONS CORRETAMENTE FECHADA -->
        <div class="cart-actions">
            <button class="submit-btn delete-btn" onclick="clearCart()"><i class="fas fa-trash-alt"></i> Limpar</button>
            <button class="submit-btn purple-btn" onclick="saveCurrentCart()"><i class="fas fa-save"></i> Salvar Carrinho</button>
        </div>

        <div class="cart-totals">
            <p>Subtotal: <span id="cart-subtotal">R$ 0,00</span></p>
            <p class="total">Total: <span id="cart-total">R$ 0,00</span></p>
        </div>

        <button class="submit-btn finaliza-venda-btn green-btn" onclick="checkout()"><i class="fas fa-check-circle"></i> Finalizar Venda</button>
    </div>
</div>
            </div>
        </section>

        <section id="parceiros" class="content-section" style="display: none;">
    <div class="tabs">
        <button class="tab-button active" data-tab-content="tab-clientes">
            <i class="fas fa-user-friends"></i> Clientes
        </button>
        <button class="tab-button" data-tab-content="tab-fornecedores">
            <i class="fas fa-truck"></i> Fornecedores
        </button>
    </div>

    <div id="tab-clientes" class="tab-content active">
    <div class="config-grid">
        <div class="card">
            <h3 class="card-title"><i class="fas fa-user-plus"></i> Novo Cliente</h3>
            <form onsubmit="handleClientForm(event)">
                <input type="hidden" id="client-id">
                <div class="form-group">
                    <label>Nome Completo *</label>
                    <input type="text" id="cliNome" required placeholder="Nome do Cliente">
                </div>
                <div class="form-group">
                    <label>CPF / CNPJ</label>
                    <input type="text" id="cliDoc" placeholder="000.000.000-00" oninput="mascaraCpfCnpj(this)" maxlength="18">
                </div>
                <div class="form-group">
                    <label>Telefone / WhatsApp</label>
                    <input type="text" id="cliTel" placeholder="(00) 00000-0000" oninput="mascaraTelefone(this)" maxlength="15">
                </div>
                <div class="form-group">
                    <label>Data de Nascimento</label>
                    <input type="date" id="cliNasc">
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn blue-btn">Salvar Cliente</button>
                    <button type="button" class="submit-btn delete-btn" onclick="clearClientForm()">Cancelar</button>
                </div>
            </form>
        </div>
        <div class="card">
            <h3 class="card-title">Clientes Cadastrados</h3>
            <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                <table class="data-table" id="clientes-table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Documento</th> 
                            <th>Contato</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div id="tab-fornecedores" class="tab-content" style="display: none;">
    <div class="config-grid">
        <div class="card">
            <h3 class="card-title"><i class="fas fa-truck-loading"></i> Novo Fornecedor</h3>
            <form onsubmit="handleSupplierForm(event)">
                <input type="hidden" id="supp-id">
                <div class="form-group">
                    <label>Razão Social / Nome *</label>
                    <input type="text" id="suppNome" required placeholder="Ex: Editora Ave Maria">
                </div>
                <div class="form-group">
                    <label>CNPJ</label>
                    <input type="text" id="suppCnpj" placeholder="00.000.000/0000-00" oninput="mascaraCnpj(this)" maxlength="18">
                </div>
                <div class="form-group">
                    <label>Contato</label>
                    <input type="text" id="suppContato" placeholder="Email ou Telefone">
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn green-btn">Salvar Fornecedor</button>
                    <button type="button" class="submit-btn delete-btn" onclick="clearSupplierForm()">Cancelar</button>
                </div>
            </form>
        </div>
        <div class="card">
            <h3 class="card-title">Fornecedores Cadastrados</h3>
            <div class="table-responsive">
                <table class="data-table" id="fornecedores-table">
                    <thead>
                        <tr>
                            <th>Empresa</th>
                            <th>CNPJ</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

    <div id="tab-fornecedores" class="tab-content" style="display: none;">
        <div class="config-grid">
            
            <div class="card">
                <h3 class="card-title">Novo Fornecedor</h3>
                <form onsubmit="handleSupplierForm(event)">
                    <input type="hidden" id="supp-id">
                    <div class="form-group">
                        <label>Razão Social / Nome *</label>
                        <input type="text" id="suppNome" required placeholder="Ex: Editora Ave Maria">
                    </div>
                    <div class="form-group">
                        <label>CNPJ</label>
                        <input type="text" id="suppCnpj" placeholder="00.000.000/0000-00">
                    </div>
                    <div class="form-group">
                        <label>Contato</label>
                        <input type="text" id="suppContato" placeholder="Email ou Telefone">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="submit-btn green-btn">Salvar Fornecedor</button>
                        <button type="button" class="submit-btn delete-btn" onclick="clearSupplierForm()">Limpar</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h3 class="card-title">Fornecedores Cadastrados</h3>
                <div class="table-responsive">
                    <table class="data-table" id="fornecedores-table">
                        <thead>
                            <tr>
                                <th>Empresa</th>
                                <th>CNPJ</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

        <section id="carrinhos-salvos" class="content-section saved-carts-section" style="display: none;">
            <div class="card">
                <h3 class="card-title">Carrinhos de Venda Salvos</h3>
                    <div class="saved-carts-grid" id="saved-carts-list">
	                </div>
            </div>
        </section>

        <section id="financeiro" class="content-section" style="display: none;">
    <div class="tabs">
        <button class="tab-button active" data-tab-content="fin-dashboard">
            <i class="fas fa-chart-line"></i> Visão Geral & DRE
        </button>
        <button class="tab-button" data-tab-content="fin-lancamentos">
            <i class="fas fa-exchange-alt"></i> Lançamentos (Despesas)
        </button>
        <button class="tab-button" data-tab-content="fin-analise">
            <i class="fas fa-brain"></i> Análise ABC & Simulações
        </button>
    </div>

    <div id="fin-dashboard" class="tab-content active">
        <div class="metric-cards-container">
            <div class="metric-card green-card">
                <div>
                    <span class="card-label">Receita Bruta (Mês)</span>
                    <span class="card-value" id="dre-receita">R$ 0,00</span>
                </div>
                <i class="fas fa-arrow-up"></i>
            </div>
            <div class="metric-card red-card">
                <div>
                    <span class="card-label">Custos + Despesas</span>
                    <span class="card-value" id="dre-custos">R$ 0,00</span>
                </div>
                <i class="fas fa-arrow-down"></i>
            </div>
            <div class="metric-card blue-card">
                <div>
                    <span class="card-label">Lucro Líquido Real</span>
                    <span class="card-value" id="dre-lucro">R$ 0,00</span>
                </div>
                <i class="fas fa-wallet"></i>
            </div>
            <div class="metric-card purple-card">
                <div>
                    <span class="card-label">Margem Líquida</span>
                    <span class="card-value" id="dre-margem">0%</span>
                </div>
                <i class="fas fa-percent"></i>
            </div>
        </div>

        <div class="card">
            <h3 class="card-title">D.R.E. Gerencial (Tempo Real)</h3>
            <div class="table-responsive">
                <table class="data-table" id="dre-table" style="font-family: monospace; font-size: 1.1rem;">
                    <thead>
                        <tr>
                            <th>Estrutura</th>
                            <th style="text-align:right">Valor (R$)</th>
                            <th style="text-align:right">Análise Vertical (%)</th>
                        </tr>
                    </thead>
                    <tbody id="dre-tbody">
                        </tbody>
                </table>
            </div>
            <div style="margin-top: 15px; text-align: right;">
                <button class="submit-btn purple-btn" onclick="generatePDF('profit-report')">
                    Imprimir DRE
                </button>
            </div>
        </div>
    </div>

    <div id="fin-lancamentos" class="tab-content" style="display: none;">
    <div class="config-grid">
        
        <div class="card">
            <h3 class="card-title"><i class="fas fa-minus-circle"></i> Registrar Nova Despesa</h3>
            <form onsubmit="handleExpenseForm(event)">
                <div class="form-group">
                    <label>Descrição</label>
                    <input type="text" id="desc-despesa" required placeholder="Ex: Aluguel, Luz...">
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Valor (R$)</label>
                        <input type="number" id="valor-despesa" required step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="cat-despesa">
                            <option value="Operacional">Operacional (Fixo)</option>
                            <option value="Pessoal">Pessoal / Salários</option>
                            <option value="Impostos">Impostos / Taxas</option>
                            <option value="Marketing">Marketing / Vendas</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Data de Competência</label>
                    <input type="date" id="data-despesa" required>
                </div>
                <button type="submit" class="submit-btn delete-btn" style="width: 100%;">Registrar Saída</button>
            </form>
        </div>

        <div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--color-border); padding-bottom: 15px;">
        <h3 class="card-title" style="margin:0;"><i class="fas fa-history"></i> Histórico de Despesas</h3>
        
        <button type="button" class="submit-btn purple-btn" onclick="imprimirTabelaDespesas()">
            Imprimir
        </button>
    </div>

    <div style="background-color: var(--color-bg-primary); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--color-border);">
    <h5 style="margin-bottom: 10px; color: var(--color-text-secondary); display:flex; align-items:center; gap:5px;">
        <i class="fas fa-filter"></i> Filtro de Despesas
    </h5>
    
    <div style="display: flex; gap: 10px; align-items: flex-end; flex-wrap: wrap;">
        <div style="flex: 1; min-width: 140px;">
            <label style="font-size: 0.8rem; color:#aaa; margin-bottom:5px; display:block;">Data Inicial:</label>
            <input type="date" id="busca-fin-inicio" style="width: 100%; padding: 10px; background:var(--color-bg-tertiary); border:1px solid var(--color-border); color:#fff; border-radius:5px;">
        </div>

        <div style="flex: 1; min-width: 140px;">
            <label style="font-size: 0.8rem; color:#aaa; margin-bottom:5px; display:block;">Data Final:</label>
            <input type="date" id="busca-fin-fim" style="width: 100%; padding: 10px; background:var(--color-bg-tertiary); border:1px solid var(--color-border); color:#fff; border-radius:5px;">
        </div>

        <div style="display:flex; gap:5px;">
            <button type="button" class="submit-btn blue-btn" onclick="filtrarDespesasV2()" style="height: 42px; padding: 0 20px;">
                <i class="fas fa-search"></i> Filtrar
            </button>
            <button type="button" class="submit-btn delete-btn" onclick="resetarFiltroDespesas()" style="height: 42px; padding: 0 15px;" title="Limpar Filtro">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
    </div>
</div>

    <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
        <table class="data-table" id="expenses-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Descrição</th>
                    <th>Categoria</th>
                    <th>Valor</th>
                    <th>Ação</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>
    </div>
</div>

    <div id="fin-analise" class="tab-content" style="display: none;">
        <div class="config-grid">
            
            <div class="card">
                <h3 class="card-title">Curva ABC (Produtos Estrela)</h3>
                <p class="config-description">Classe A: Representam 80% do seu faturamento.</p>
                <div class="table-responsive" style="max-height: 300px; overflow-y: auto;">
                    <table class="data-table" id="abc-table">
                        <thead>
                            <tr>
                                <th>Classe</th>
                                <th>Produto</th>
                                <th>Faturamento</th>
                                <th>Acumulado</th>
                            </tr>
                        </thead>
                        <tbody id="abc-tbody"></tbody>
                    </table>
                </div>
            </div>

            <div class="card" style="background: linear-gradient(145deg, var(--color-bg-secondary), #1a202c);">
                <h3 class="card-title">Simulador de Futuro</h3>
                <p class="config-description">O que acontece se...</p>
                
                <div class="form-group">
                    <label>Aumentar Vendas em (%):</label>
                    <input type="number" id="sim-vendas-pct" value="10" oninput="runSimulation()">
                </div>
                <div class="form-group">
                    <label>Reduzir Custos Fixos em (%):</label>
                    <input type="number" id="sim-custos-pct" value="5" oninput="runSimulation()">
                </div>

                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4 style="margin:0; font-size: 0.9rem; color:#aaa;">Resultado Projetado:</h4>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:10px;">
                        <span>Novo Lucro Líquido:</span>
                        <span id="sim-resultado" style="font-size: 1.4rem; font-weight: bold; color: var(--color-accent-green);">R$ 0,00</span>
                    </div>
                </div>
                
                <div style="margin-top:20px; border-top:1px solid #333; padding-top:10px;">
                    <button class="submit-btn blue-btn" style="width:100%; opacity: 0.6; cursor: not-allowed;" title="Requer API Bancária">
                        <i class="fas fa-university"></i> Integração Bancária (Em Breve)
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="relatorios" class="content-section" style="display: none;">
    
    <div class="tabs" style="margin-bottom: 20px;">
        <button class="tab-button active" data-tab-content="rel-vendas">
            <i class="fas fa-search"></i> Pesquisa de Vendas
        </button>
        <button class="tab-button" data-tab-content="rel-estoque" onclick="calcularKPIsEstoque()">
            <i class="fas fa-boxes"></i> Inteligência de Estoque (GMROI)
        </button>
        <button class="tab-button" data-tab-content="rel-margem" onclick="calcularAnaliseMargem()">
            <i class="fas fa-chart-pie"></i> Análise de Margens
        </button>
    </div>

    <div id="rel-vendas" class="tab-content active">
        
        <div class="metric-cards-container" style="margin-bottom: 20px;">
    
    <div class="metric-card blue-card" style="padding: 15px;">
        <div>
            <span class="card-label">Valor de Estoque (Lucro)</span>
            <span class="card-value" id="exec-estoque-custo">R$ 0,00</span>
        </div>
        <i class="fas fa-boxes"></i>
    </div>

    <div class="metric-card green-card" style="padding: 15px;">
        <div>
            <span class="card-label">Ticket Médio (Mês)</span>
            <span class="card-value" id="exec-ticket">R$ 0,00</span>
        </div>
        <i class="fas fa-receipt"></i>
    </div>

    <div class="metric-card purple-card" style="padding: 15px;">
        <div>
            <span class="card-label">Top Cliente (Mês)</span>
            <span class="card-value" id="exec-top-cliente" style="font-size: 1.1rem;">-</span>
        </div>
        <i class="fas fa-crown"></i>
    </div>
</div>

        <div class="card">
            <div class="report-header">
                <h3 class="card-title" style="margin:0;"><i class="fas fa-list"></i> Detalhamento de Vendas</h3>
                
                <div class="report-controls">
                    <div class="search-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" id="sales-search-fixed" placeholder="Pesquisar ID, Cliente..." onkeyup="filterSalesTable(this.value)">
                    </div>

                    <button class="submit-btn blue-btn" onclick="abrirModalRelatorio()" style="height: 40px; display:flex; align-items:center;">
                        <i class="fas fa-calendar-alt"></i> Filtrar Data
                    </button>
                    
                    <button id="btn-clear-relatorio" class="submit-btn delete-btn" onclick="limparFiltroRelatorio()" style="display:none; height: 40px;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="table-responsive">
                <table class="data-table" id="sales-report-table">
                    <thead>
                        <tr>
                            <th>ID Venda</th>
                            <th>Data</th>
                            <th>Total (R$)</th>
                            <th>Pagamento</th>
                            <th>Itens</th>
                            <th>Cliente</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="sales-table-body">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="rel-estoque" class="tab-content" style="display: none;">
        <div class="config-grid">
            
            <div class="metric-cards-container" style="grid-column: 1 / -1; margin-bottom: 10px;">
                <div class="metric-card orange-card">
                    <div>
                        <span class="card-label" title="Gross Margin Return on Investment">GMROI (Retorno s/ Estoque)</span>
                        <span class="card-value" id="kpi-gmroi">0.0</span>
                        <small style="color:#aaa;">Meta: > 1.5</small>
                    </div>
                    <i class="fas fa-coins"></i>
                </div>
                <div class="metric-card red-card">
                    <div>
                        <span class="card-label">Custo do Estoque Corrente</span>
                        <span class="card-value" id="kpi-stock-cost">R$ 0,00</span>
                    </div>
                    <i class="fas fa-warehouse"></i>
                </div>
                <div class="metric-card blue-card">
                    <div>
                        <span class="card-label">Giro de Estoque (Médio)</span>
                        <span class="card-value" id="kpi-giro">0x / ano</span>
                    </div>
                    <i class="fas fa-sync"></i>
                </div>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
                <h3 class="card-title"><i class="fas fa-exclamation-triangle"></i> Cobertura de Estoque e Risco de Ruptura</h3>
                <p class="config-description">Produtos que vão acabar em breve baseado na média de vendas diária.</p>
                <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                    <table class="data-table" id="ruptura-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Estoque Atual</th>
                                <th>Vendas/Dia (Média)</th>
                                <th>Dias de Cobertura</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="ruptura-tbody">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="rel-margem" class="tab-content" style="display: none;">
        <div class="config-grid">
            <div class="card">
                <h3 class="card-title"><i class="fas fa-tags"></i> Margem por Categoria</h3>
                <div class="table-responsive">
                    <table class="data-table" id="margem-cat-table">
                        <thead>
                            <tr>
                                <th>Categoria</th>
                                <th>Receita Total</th>
                                <th>Lucro Bruto</th>
                                <th>Margem %</th>
                            </tr>
                        </thead>
                        <tbody id="margem-cat-tbody"></tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title"><i class="fas fa-users"></i> Top Clientes (Rentabilidade)</h3>
                <div class="table-responsive">
                    <table class="data-table" id="margem-cli-table">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>Compras</th>
                                <th>Ticket Médio</th>
                                <th>Total Gasto</th>
                            </tr>
                        </thead>
                        <tbody id="margem-cli-tbody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

        

        

        <section id="config" class="content-section" style="display: none;">
            
    <div class="card">
        <h3 class="card-title"><i class="fas fa-cogs"></i> Configurações do Sistema</h3>
        
        <div class="config-tabs">
            <button class="config-tab-button active" data-config-tab="categories">
                <i class="fas fa-tags"></i> Categorias
            </button>
            <button class="config-tab-button" data-config-tab="payments">
                <i class="fas fa-credit-card"></i> Pagamentos
            </button>
            <!-- REMOVIDA A ABA GERAIS -->
            <button class="config-tab-button" data-config-tab="backup">
                <i class="fas fa-database"></i> Backup
            </button>
        </div>

        <!-- ABA CATEGORIAS -->
        <div id="categories-tab" class="config-tab-content active">
            <div class="config-section">
                <h4><i class="fas fa-tags"></i> Gerenciar Categorias</h4>
                <p class="config-description">Adicione, edite ou remova categorias de produtos.</p>
                
                <div class="categories-manager">
                    <div class="categories-list">
                        <h5>Categorias Existentes</h5>
                        <div class="categories-container" id="categories-container">
                            <!-- Categorias serão injetadas aqui -->
                        </div>
                    </div>
                    
                    <div class="category-form">
                        <h5>Adicionar Nova Categoria</h5>
                        <div class="form-group">
                            <input type="text" id="new-category-name" placeholder="Nome da categoria" maxlength="50">
                            <button class="submit-btn blue-btn" onclick="addNewCategory()">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA PAGAMENTOS -->
        <div id="payments-tab" class="config-tab-content">
            <div class="config-section">
                <h4><i class="fas fa-credit-card"></i> Métodos de Pagamento</h4>
                <p class="config-description">Gerencie as formas de pagamento aceitas no PDV.</p>
                
                <div class="payments-manager">
                    <div class="payments-list">
                        <h5>Métodos Ativos</h5>
                        <div class="payments-container" id="payments-container">
                            <!-- Métodos serão injetadas aqui -->
                        </div>
                    </div>
                    
                    <div class="payment-form">
                        <h5>Adicionar Novo Método</h5>
                        <div class="form-group">
                            <input type="text" id="new-payment-name" placeholder="Nome do método" maxlength="30">
                            <button class="submit-btn blue-btn" onclick="addNewPayment()">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA BACKUP CORRIGIDA -->
        <div id="backup-tab" class="config-tab-content">
        <div class="config-grid">

        <div class="config-section">
    <h4><i class="fas fa-file-invoice-dollar"></i> Importar Nota (XML)</h4>
    <p class="config-description">Dê entrada no estoque automaticamente usando o XML da Nota Fiscal Eletrônica.</p>
    
    <div class="config-actions">
        <input type="file" id="xml-input" accept=".xml" style="display: none;" onchange="processarXMLNota(this)">
        
        <button class="submit-btn green-btn" onclick="document.getElementById('xml-input').click()" style="width: 100%;">
            <i class="fas fa-upload"></i> Selecionar Arquivo XML
        </button>
    </div>
</div>    
                
        <div class="config-section">
            <h4><i class="fas fa-download"></i> Exportar Dados</h4>
            <p class="config-description">Faça backup de todos os dados do sistema.</p>
            
            <div class="backup-options">
                <button class="submit-btn blue-btn" onclick="exportData('all')">
                    <i class="fas fa-file-export"></i> Exportar Tudo (JSON)
                </button>
                <button class="submit-btn green-btn" onclick="exportData('products')">
                    <i class="fas fa-boxes"></i> Apenas Produtos
                </button>
                <button class="submit-btn purple-btn" onclick="exportData('sales')">
                    <i class="fas fa-chart-line"></i> Apenas Vendas
                </button>
            </div>
        </div>

        <div class="config-section">
    <h4><i class="fas fa-tags"></i> Etiquetas</h4>
    <p class="config-description">Gerar folhas de etiquetas com código de barras para seus produtos.</p>
    
    <div class="config-actions">
        <button class="submit-btn purple-btn" onclick="abrirModalEtiquetas()" style="width: 100%;">
            <i class="fas fa-barcode"></i> Abrir Gerador
        </button>
    </div>
</div>

        <div class="config-section">
            <h4><i class="fas fa-upload"></i> Importar Dados</h4>
            <p class="config-description">Restaure dados de um backup anterior.</p>
            
            <div class="import-options">
            <div class="form-group">
                <label for="arquivo-backup-input">Selecionar arquivo de backup</label>
                <input type="file" id="arquivo-backup-input" accept=".json" class="config-input">
            </div>
            <button class="submit-btn blue-btn" onclick="importData()">
                <i class="fas fa-file-import"></i> Confirmar Importação
            </button>
        </div>
            
            <div class="import-info">
                <small><i class="fas fa-info-circle"></i> Use arquivos JSON exportados deste sistema</small>
            </div>
        </div>

        <div class="config-section">
            <h4><i class="fas fa-file-pdf"></i> Relatórios em PDF</h4>
            <p class="config-description">Gere relatórios profissionais em PDF.</p>
            
            <div class="pdf-options">
    
                <button class="submit-btn red-btn" onclick="generatePDF('sales-report')">
        <i class="fas fa-file-pdf"></i> Relatório de Vendas
    </button>
    
    <button class="submit-btn orange-btn" onclick="generatePDF('inventory-report')">
        <i class="fas fa-clipboard-list"></i> Relatório de Estoque
    </button>
    <button class="submit-btn teal-btn" onclick="generatePDF('profit-report')">
        <i class="fas fa-chart-bar"></i> Relatório de Lucros
    </button>

    
</div>


            
            <div class="pdf-period" style="margin-top: 15px;">
                <label for="pdf-period">Período do relatório:</label>
                <select id="pdf-period" class="config-select">
                    <option value="7">Últimos 7 dias</option>
                    <option value="30" selected>Últimos 30 dias</option>
                    <option value="90">Últimos 3 meses</option>
                    <option value="custom">Personalizado (Escolher Datas)</option> </select>
                </select>
            </div>
        </div>

        <div class="config-section">
            <h4><i class="fas fa-trash"></i> Limpeza</h4>
            <p class="config-description">Gerencie o espaço e performance do sistema.</p>
            
            <div class="cleanup-options">
                <button class="submit-btn delete-btn" onclick="clearOldSales()">
                    <i class="fas fa-broom"></i> Limpar Vendas Antigas
                </button>
                <button class="submit-btn red-btn" onclick="clearAllData()">
                    <i class="fas fa-trash-alt"></i> Limpar Todos os Dados
                </button>
            </div>
            
            <div class="storage-info">
                <h5>Uso de Armazenamento</h5>
                <div class="storage-bar">
                    <div class="storage-used" id="storage-used"></div>
                </div>
                <small id="storage-text">Calculando...</small>
            </div>
        </div>
    </div>
</div>
    </div>
        </section>
    </div>

		    
		    <!-- Modal de Pagamento (Novo) -->
		    <div id="payment-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content payment-modal-content">
        <h3><i class="fas fa-credit-card"></i> Finalizar Venda</h3>
        <p>Total a Pagar: <span id="payment-total-display" class="total-amount">R$ 0,00</span></p>
        
        <div id="payment-options-container"></div>
    </div>
</div>
	    <!-- O bloco de script abaixo foi removido (Inclusão Dupla de script.js) -->
    <!-- Modal de Detalhes da Venda -->
    <div id="sale-details-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content sale-details-modal">
        <div class="modal-header">
            <h3><i class="fas fa-receipt"></i> Detalhes da Venda</h3>
            <button class="close-modal-btn" onclick="closeSaleDetails()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="sale-info">
            <div class="sale-meta">
                <div class="meta-item">
                    <span class="meta-label">ID da Venda:</span>
                    <span class="meta-value" id="detail-sale-id">#</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Data/Hora:</span>
                    <span class="meta-value" id="detail-sale-date">-</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Pagamento:</span>
                    <span class="meta-value" id="detail-sale-payment">-</span>
                </div>
                <div class="meta-item total-item">
                    <span class="meta-label">Total:</span>
                    <span class="meta-value total-amount" id="detail-sale-total">R$ 0,00</span>
                </div>
            </div>
        </div>
        
        <div class="sale-items">
            <h4><i class="fas fa-shopping-cart"></i> Itens da Venda</h4>
            <div class="items-list" id="detail-sale-items">
                <!-- Itens serão injetados aqui -->
            </div>
        </div>
        
        <div class="modal-actions">
            <button class="submit-btn blue-btn" onclick="closeSaleDetails()">
                <i class="fas fa-times"></i> Fechar
            </button>
        </div>
    </div>
    </div>

    <div id="save-cart-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 400px;">
        <h3><i class="fas fa-save"></i> Salvar Carrinho</h3>
        <p style="margin-bottom: 15px; color: #666;">Digite um nome para identificar este carrinho futuramente.</p>
        
        <div class="form-group">
            <label>Nome do Carrinho:</label>
            <input type="text" id="save-cart-client-name" placeholder="Ex: Mesa 10, João, Encomenda..." 
                   style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ddd; border-radius: 5px;">
        </div>

        <div class="modal-actions" style="margin-top: 20px; display: flex; justify-content: flex-end; gap: 150px;">
            <button class="submit-btn delete-btn" onclick="document.getElementById('save-cart-modal').style.display='none'">
                Cancelar
            </button>
            <button class="submit-btn green-btn" onclick="confirmSaveCart()">
                Salvar
            </button>
        </div>
    </div>

    
    
</div>

<div id="custom-alert" class="modal-overlay" style="display: none; z-index: 20000;">
    <div class="modal-content" style="max-width: 400px; text-align: center;">
        <div id="alert-icon" style="font-size: 3rem; margin-bottom: 15px;"></div>
        <h3 id="alert-title" style="margin-bottom: 10px;">Atenção</h3>
        <p id="alert-message" style="color: var(--color-text-secondary); margin-bottom: 20px;">Mensagem aqui</p>
        <button class="submit-btn blue-btn" onclick="closeCustomAlert()" style="width: 100%; justify-content: center;">Entendi</button>
    </div>
</div>

<div id="custom-confirm" class="modal-overlay" style="display: none; z-index: 20000;">
    <div class="modal-content" style="max-width: 400px; text-align: center;">
        <i class="fas fa-question-circle" style="font-size: 3rem; color: var(--color-accent-blue); margin-bottom: 15px;"></i>
        <h3 style="margin-bottom: 10px; justify-content: center;">🚨 PERIGO</h3>
        <p id="confirm-message" style="color: var(--color-text-secondary); margin-bottom: 20px;">Essa ação não pode ser desfeita.</p>
        
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button class="submit-btn delete-btn" onclick="closeCustomConfirm(false)" style="flex: 1; justify-content: center;">Cancelar</button>
            <button class="submit-btn green-btn" id="btn-confirm-yes" style="flex: 1; justify-content: center;">Sim, Confirmar</button>
        </div>
    </div>
</div>

<div id="custom-prompt" class="modal-overlay" style="display: none; z-index: 20000;">
    <div class="modal-content" style="max-width: 400px; text-align: center;">
        <div style="width: 100%; display: flex; justify-content: center; margin-bottom: 15px;">
            <i class="fas fa-keyboard" style="font-size: 3rem; color: var(--color-accent-blue);"></i>
        </div>
        
        <h3 id="prompt-title" style="margin-bottom: 10px; width: 100%; text-align: center;">Digite a informação</h3>
        <p id="prompt-message" style="color: var(--color-text-secondary); margin-bottom: 15px; width: 100%; text-align: center;"></p>
        
        <input type="text" id="prompt-input" class="config-input" style="width: 100%; margin-bottom: 20px; text-align: center; font-size: 1.2rem; padding: 10px; border-radius: 8px; border: 1px solid #444; background: #222; color: #fff;" placeholder="..." autocomplete="off" readonly>

        <div style="display: flex; gap: 10px; justify-content: center; width: 100%;">
            <button class="submit-btn delete-btn" onclick="closeCustomPrompt()" style="flex: 1; justify-content: center;">Cancelar</button>
            <button class="submit-btn blue-btn" id="btn-prompt-confirm" style="flex: 1; justify-content: center;">Confirmar</button>
        </div>
    </div>
</div>

<div id="label-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 700px; max-height: 90vh; display: flex; flex-direction: column;">
        
        <div class="modal-header" style="border-bottom: 1px solid var(--color-border); padding-bottom: 15px; margin-bottom: 15px;">
            <h3>Imprimir Etiquetas</h3>
            <button class="close-modal-btn" onclick="document.getElementById('label-modal').style.display='none'">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div style="margin-bottom: 15px;">
            <input type="text" id="label-search" placeholder="Filtrar produtos..." 
                   onkeyup="filtrarListaEtiquetas()"
                   style="width: 100%; padding: 10px; background: var(--color-bg-tertiary); color: var(--color-text-primary); border: 1px solid var(--color-border); border-radius: 6px;">
        </div>

        <div class="table-responsive" style="flex: 1; overflow-y: auto; border: 1px solid var(--color-border); border-radius: 6px;">
            <table class="data-table" id="label-selection-table">
                <thead>
                    <tr>
                        <th style="width: 40px;"><input type="checkbox" onclick="toggleTodasEtiquetas(this)"></th>
                        <th>Produto</th>
                        <th style="width: 100px;">Qtd. Etiquetas</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
        </div>

        <div class="modal-actions" style="margin-top: 20px; border-top: 1px solid var(--color-border); padding-top: 15px;">
            <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                <label style="font-size: 0.9rem; color: #aaa;">Tamanho do Papel:</label>
                <select id="label-size" style="padding: 8px; border-radius: 4px; background: #222; color: #fff; border: 1px solid #444;">
                    <option value="thermal">Térmica (80mm x 40mm)</option>
                    <option value="a4">Folha A4 (Pimaco)</option>
                </select>
            </div>
            <button class="submit-btn delete-btn" onclick="document.getElementById('label-modal').style.display='none'">Cancelar</button>
            <button class="submit-btn purple-btn" onclick="gerarPDFEtiquetasSelecionadas()">
                <i class="fas fa-print"></i> Gerar PDF
            </button>
        </div>
    </div>
</div>

<div id="date-filter-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 400px;">
        <div class="modal-header" style="border-bottom: 1px solid var(--color-border); padding-bottom: 10px; margin-bottom: 15px;">
            <h3><i class="fas fa-calendar-day"></i> Selecionar Período</h3>
            <button class="close-modal-btn" onclick="closeDateFilterModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="form-group">
            <label>Data Inicial</label>
            <input type="date" id="filter-start-date" style="width: 100%;">
        </div>

        <div class="form-group">
            <label>Data Final</label>
            <input type="date" id="filter-end-date" style="width: 100%;">
        </div>

        <div class="modal-actions" style="margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px;">
            <button class="submit-btn delete-btn" onclick="limparFiltroVendas()">
                <i class="fas fa-broom"></i> Limpar
            </button>
            <button class="submit-btn green-btn" onclick="aplicarFiltroVendas()">
                <i class="fas fa-check"></i> Aplicar Filtro
            </button>
        </div>
    </div>
</div>
<div id="modal-filtro-vendas" class="modal-overlay" style="display:none; z-index: 3000;">
    <div class="modal-content" style="max-width: 350px; background-color: var(--color-bg-secondary); border: 1px solid var(--color-border);">
        
        <div class="modal-header" style="border-bottom: 1px solid var(--color-border); padding-bottom: 10px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin:0; color: var(--color-text-primary);"><i class="fas fa-calendar-day"></i> Período</h3>
            <button class="close-modal-btn" onclick="document.getElementById('modal-filtro-vendas').style.display='none'" style="background:none; border:none; color:var(--color-text-secondary); cursor:pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="form-group" style="margin-bottom: 15px;">
            <label style="display:block; margin-bottom:5px; color: var(--color-text-secondary);">Data Inicial</label>
            <input type="date" id="modal-relatorio-start" style="width: 100%; padding: 10px; background: var(--color-bg-tertiary); border: 1px solid var(--color-border); color: var(--color-text-primary); border-radius: 5px;">
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label style="display:block; margin-bottom:5px; color: var(--color-text-secondary);">Data Final</label>
            <input type="date" id="modal-relatorio-end" style="width: 100%; padding: 10px; background: var(--color-bg-tertiary); border: 1px solid var(--color-border); color: var(--color-text-primary); border-radius: 5px;">
        </div>

        <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 10px;">
            <button class="submit-btn delete-btn" onclick="document.getElementById('modal-filtro-vendas').style.display='none'">
                Cancelar
            </button>
            <button class="submit-btn green-btn" onclick="executarFiltroRelatorio()">
                Aplicar Filtro
            </button>
        </div>
    </div>
</div>

</div>
<script type="module" src="script.js"></script>
</body>
</html>